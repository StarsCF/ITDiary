**Objective-C 里每个对象都会指向一个类，每个类都会有一个方法列表，方法列表里的每个方法都是由 selector、函数指针和 metadata 组成的。**

objc_msgSend 方法干的活儿，就是在**运行时根据对象和方法的 selector 去找到对应的函数指针，然后执行**。也就是说，objc_msgSend 是 Objective-C 里方法执行的必经之路，能够控制所有的 Objective-C 的方法。

**objc_msgSend 本身是用汇编语言写的，这样做的原因主要有两个：**

- objc_msgSend 的调用频次最高，在它上面进行的性能优化能够提升整个 App 生命周期的性能。而汇编语言在性能优化上属于原子级优化，能够把优化做到极致。所以，这种投入产出比无疑是最大的;
- 其他语言难以实现未知参数跳转到任意函数指针的功能;

苹果公司已经开源了 [Objective-C 的运行时](https://opensource.apple.com/source/objc4/objc4-723/runtime/Messengers.subproj/)代码。

![](/Users/fanchongchong/Documents/Github/ITDiary/iOS/2、runtime/image/Snipaste_2021-09-14_23-36-58.png)

objc_msgSend 方法执行的逻辑是：**先获取对象对应类的信息，再获取方法的缓存，根据方法的 selector 查找函数指针，经过异常错误处理后，最后跳到对应函数的实现**。

 >参考文章链接：
 >
 >1、[02 | App 启动速度怎么做优化与监控？](https://time.geekbang.org/column/article/85331)